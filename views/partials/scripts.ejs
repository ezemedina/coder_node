<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
<script type="text/javascript">
    const api = 'http://localhost:8080/api/productos';

    let formSubirProducto = document.getElementById("formSubirProducto");
    let botonEnviar = document.getElementById("botonEnviar");
    let botonEnviando = document.getElementById("botonEnviando");

    formSubirProducto.addEventListener("submit", (e) => {
        e.preventDefault();
        let producto = e.target.children[1].children[1].value
        let precio = e.target.children[2].children[1].value
        let imagen = e.target.children[3].children[1].value

        botonEnviar.classList.add('visually-hidden')
        botonEnviando.classList.remove('visually-hidden')

        let data = {
            title: producto,
            price: precio,
            thumbnail: imagen
        };

        fetch(api, {
            method: 'POST',
            body: JSON.stringify(data),
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(res => res.json())
            .catch(function (error) {
                botonEnviando.classList.add('visually-hidden')
                botonEnviar.classList.remove('visually-hidden')
            })
            .then(function (response) {
                botonEnviando.classList.add('visually-hidden')
                botonEnviar.classList.remove('visually-hidden')
            });
    });

</script>